<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>ğŸ™ï¸ Hands-free Interview Assistant</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>ğŸ™ï¸ Hands-free Interview Assistant</h1>

      <!-- Context Input Section -->
      <div class="row">
        <div>
          <label>Resume</label>
          <textarea id="resume" rows="7" placeholder="Paste candidate resume text hereâ€¦"></textarea>
        </div>
        <div>
          <label>Job Description</label>
          <textarea id="job" rows="7" placeholder="Paste JD hereâ€¦"></textarea>
        </div>
      </div>

      <!-- Control Toolbar -->
      <div class="toolbar" style="margin:.25rem 0 1rem">
        <button id="saveCtx">Save Context</button>
        <button id="firstQ" class="secondary">Ask First Question</button>

        <label style="margin-left:.5rem">Duration:</label>
        <select id="duration" style="width:auto">
          <option value="10">10 min</option>
          <option value="15" selected>15 min</option>
          <option value="20">20 min</option>
        </select>

        <label style="margin-left:.5rem">Voice:</label>
        <select id="voiceSelect" style="width:auto">
          <option value="en-IN-Neural2-B">en-IN (Default)</option>
          <option value="en-IN-Neural2-A">en-IN (Alternate)</option>
          <option value="en-US-Neural2-A">en-US (Female)</option>
          <option value="en-US-Neural2-C">en-US (Male)</option>
        </select>

        <div class="grow"></div>

        <div id="countdown" style="opacity:.8">â³ â€”:â€”</div>
        <button id="finishNow" class="secondary" title="End interview and get feedback">Finish Now</button>
        <button id="toggle">â–¶ï¸ Start Conversation</button>
        <button id="startCoding" class="secondary" title="Start 5-minute coding window">Start Coding</button>
        <button id="submitCode" class="secondary" title="Submit your code" disabled>Submit Code</button>
        <label id="codingTimer" style="opacity:.9">ğŸ§© 5:00</label>
      </div>

      <!-- Conversation Log -->
      <div class="log" id="log" aria-live="polite"></div>

      <!-- Code Editor Area -->
      <div style="margin-top:1rem">
        <label>Code (optional - use when you press Start Coding)</label>
        <textarea id="codeArea" rows="10" placeholder="Type code or paste snippet here..." 
                  style="width:100%; font-family:monospace;"></textarea>
      </div>

      <!-- Audio Player -->
      <audio id="player" playsinline></audio>
      <small>Tip: press <b>Space</b> to start/stop. Improved VAD auto-detects speech.</small>
    </div>
  </div>

  <!-- External Dependencies -->
  <script src="https://cdn.jsdelivr.net/npm/onnxruntime-web@1.18.0/dist/ort.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@ricky0123/vad-web@0.0.7/dist/bundle.min.js"></script>

  <!-- Application Scripts -->
  <script src="/js/api.js"></script>
  <script src="/js/audio.js"></script>
  <script src="/js/timer.js"></script>
  <script src="/js/coding.js"></script>
  <script src="/js/app.js"></script>

  <!-- Socket.IO client (v4.x) - must load BEFORE your ws_client script -->
  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js" integrity="" crossorigin="anonymous"></script>

  <!-- WebSocket client that depends on Socket.IO -->
  <script src="/js/ws_client.js"></script>
</body>
</html>
